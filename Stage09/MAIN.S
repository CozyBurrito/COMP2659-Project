; Generated by c68 v4.4.5, 25 Jan 95 (Jan 25 1995) from "main.c"
	data
	even
_CTRL:
	dc.l	16776192
_STATUS:
	dc.l	16776192
_READER:
	dc.l	16776194
_MFP:
	dc.l	16775697
_IE:
	dc.l	16775689
	text
	even
_do_kbd_isr:
	link	a6,#-2
	move.l	d3,-(a7)
	;line	28
	move.l	_READER,a0
	move.b	(a0),d3
	;line	28
	move.b	#128,d0
	and.b	d3,d0
	cmp.b	#128,d0
	beq	L1
	;line	29
	move.b	_tail,d0
	addq.b	#1,_tail
	and.l	#255,d0
	move.l	d0,a0
	add.l	#_buffer,a0
	move.b	d3,(a0)
L1:
	;line	32
	move.l	_MFP,a0
	and.b	#191,(a0)
	move.l	(a7)+,d3
	unlk	a6
	rts
_get_input:
	link	a6,#-6
	movem.l	d3/d4/a3,-(a7)
	moveq	#32,d4
	lea	__trap_1_wl,a3
	;line	38
	pea	0
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	move.l	d0,d3
	;line	38
	move.l	_IE,a0
	and.b	#191,(a0)
	;line	39
	move.l	d3,-(a7)
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	;line	41
	move.b	_head,d0
	addq.b	#1,_head
	and.l	#255,d0
	move.l	d0,a0
	add.l	#_buffer,a0
	move.b	(a0),-1(a6)
	;line	43
	pea	0
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	move.l	d0,d3
	;line	44
	move.l	_IE,a0
	or.b	#64,(a0)
	;line	45
	move.l	d3,-(a7)
	move.w	d4,-(a7)
	jsr	(a3)
	;line	46
	move.b	-1(a6),d0
L2:
	movem.l	-18(a6),d3/d4/a3
	unlk	a6
	rts
_buffer_full:
	link	a6,#0
	;line	50
	move.b	_head,d0
	cmp.b	_tail,d0
	sne	d0
	and.w	#1,d0
L3:
	unlk	a6
	rts
_install_vector:
	link	a6,#-12
	move.l	a3,-(a7)
	;line	58
	move.w	8(a6),d0
	ext.l	d0
	asl.l	#2,d0
	move.l	d0,a3
	pea	0
	move.w	#32,-(a7)
	jsr	__trap_1_wl
	addq.l	#6,a7
	move.l	d0,-12(a6)
	;line	58
	move.l	(a3),-4(a6)
	;line	59
	move.l	10(a6),(a3)
	;line	61
	move.l	-12(a6),-(a7)
	move.w	#32,-(a7)
	jsr	__trap_1_wl
	;line	62
	move.l	-4(a6),d0
L4:
	move.l	-16(a6),a3
	unlk	a6
	rts
_plot_screen:
	link	a6,#-4
	movem.l	d3/d4/a3,-(a7)
	moveq	#80,d4
	;line	70
	moveq	#0,d3
	sub.l	a3,a3
	;line	70
	moveq	#0,d3
	bra	L6
L5:
	;line	71
	sub.l	a3,a3
	bra	L10
L9:
	;line	72
	move.l	8(a6),a0
	move.w	14(a6),d0
	add.w	d3,d0
	muls	d4,d0
	ext.l	d0
	add.l	d0,a0
	move.w	12(a6),d0
	asr.w	#3,d0
	add.w	a3,d0
	ext.l	d0
	add.l	d0,a0
	move.l	16(a6),a1
	move.w	d4,d0
	muls	d3,d0
	sub.w	a3,d0
	add.w	d4,d0
	ext.l	d0
	add.l	d0,a1
	move.b	(a1),d0
	or.b	d0,(a0)
L12:
	addq.w	#1,a3
L10:
	cmp.w	a3,d4
	bgt	L9
L11:
L8:
	addq.w	#1,d3
L6:
	cmp.w	20(a6),d3
	bcs	L5
L7:
	movem.l	(a7)+,d3/d4/a3
	unlk	a6
	rts
_plot_bitmap_32:
	link	a6,#-4
	movem.l	d3/a3,-(a7)
	;line	83
	moveq	#0,d3
	sub.l	a3,a3
	;line	83
	moveq	#0,d3
	bra	L14
L13:
	;line	84
	sub.l	a3,a3
	bra	L18
L17:
	;line	85
	move.w	14(a6),d0
	add.w	d3,d0
	muls	#80,d0
	move.w	d0,a0
	add.l	8(a6),a0
	move.w	12(a6),d0
	asr.w	#3,d0
	add.w	a3,d0
	ext.l	d0
	add.l	d0,a0
	move.w	d3,d0
	add.w	d0,d0
	add.w	d0,d0
	sub.w	a3,d0
	addq.w	#3,d0
	move.w	d0,a1
	move.l	16(a6),d0
	add.l	d0,a1
	move.b	(a1),d0
	or.b	d0,(a0)
L20:
	addq.w	#1,a3
L18:
	cmp.w	#4,a3
	blt	L17
L19:
L16:
	addq.w	#1,d3
L14:
	cmp.w	20(a6),d3
	bcs	L13
L15:
	movem.l	(a7)+,d3/a3
	unlk	a6
	rts
_clear_area:
	link	a6,#-4
	movem.l	d3/a3,-(a7)
	;line	95
	moveq	#0,d3
	sub.l	a3,a3
	;line	95
	moveq	#0,d3
	bra	L22
L21:
	;line	96
	sub.l	a3,a3
	bra	L26
L25:
	;line	97
	move.w	14(a6),d0
	add.w	d3,d0
	muls	#80,d0
	move.w	d0,a0
	add.l	8(a6),a0
	move.w	12(a6),d0
	asr.w	#3,d0
	add.w	a3,d0
	ext.l	d0
	add.l	d0,a0
	move.w	d3,d0
	add.w	d0,d0
	add.w	d0,d0
	sub.w	a3,d0
	addq.w	#3,d0
	move.w	d0,a1
	add.l	#_rocket_empty,a1
	move.b	(a1),d0
	and.b	d0,(a0)
L28:
	addq.w	#1,a3
L26:
	cmp.w	#4,a3
	blt	L25
L27:
L24:
	addq.w	#1,d3
L22:
	cmp.w	#32,d3
	blt	L21
L23:
	movem.l	(a7)+,d3/a3
	unlk	a6
	rts
_splash_screen:
	link	a6,#0
	;line	104
	move.l	8(a6),-(a7)
	jsr	_clear_screen
	addq.l	#4,a7
	;line	105
	move.w	#400,-(a7)
	pea	_splash
	clr.w	-(a7)
	clr.w	-(a7)
	move.l	8(a6),-(a7)
	jsr	_plot_screen
	unlk	a6
	rts
_main:
	link	a6,#-18
	movem.l	d3/d4/d5/d6/d7/a3/a4/a5,-(a7)
	moveq	#32,d4
	lea	__trap_1_wl,a3
	lea	_IE,a4
	;line	119
	clr.w	-4(a6)
	moveq	#0,d6
	pea	0
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	move.l	d0,d3
	;line	119
	move.l	(a4),a0
	and.b	#191,(a0)
	;line	120
	move.l	d3,-(a7)
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	;line	123
	pea	_kbd_isr
	move.w	#70,-(a7)
	jsr	_install_vector
	addq.l	#6,a7
	move.l	d0,a5
	;line	126
	pea	0
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	move.l	d0,d3
	;line	127
	move.l	(a4),a0
	or.b	#64,(a0)
	;line	128
	move.l	d3,-(a7)
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	;line	131
	jsr	_get_video_base
	move.l	d0,d5
	;line	132
	move.l	d5,-(a7)
	jsr	_splash_screen
	addq.l	#4,a7
	;line	133
	move.w	d4,-(a7)
	pea	_rocket_right
	move.w	#127,-(a7)
	move.w	#50,-(a7)
	move.l	d5,-(a7)
	jsr	_plot_bitmap_32
	lea	14(a7),a7
	;line	134
	bra	L30
L29:
	;line	136
	jsr	_buffer_full
	tst.w	d0
	beq	L32
	;line	137
	jsr	_get_input
	move.b	d0,d7
L32:
	;line	139
	cmp.b	#31,d7
	bne	L33
	move.w	d6,d0
	ext.l	d0
	divs	#2,d0
	swap	d0
	tst.w	d0
	bne	L33
	;line	140
	addq.w	#1,d6
	;line	141
	move.w	#127,-(a7)
	move.w	#50,-(a7)
	move.l	d5,-(a7)
	jsr	_clear_area
	addq.l	#8,a7
	;line	142
	move.w	d4,-(a7)
	pea	_rocket_right
	move.w	#219,-(a7)
	move.w	#50,-(a7)
	move.l	d5,-(a7)
	jsr	_plot_bitmap_32
	lea	14(a7),a7
L33:
	;line	144
	cmp.b	#17,d7
	bne	L34
	move.w	d6,d0
	ext.l	d0
	divs	#2,d0
	swap	d0
	cmp.w	#1,d0
	bne	L34
	;line	145
	addq.w	#1,d6
	;line	146
	move.w	#219,-(a7)
	move.w	#50,-(a7)
	move.l	d5,-(a7)
	jsr	_clear_area
	addq.l	#8,a7
	;line	147
	move.w	d4,-(a7)
	pea	_rocket_right
	move.w	#127,-(a7)
	move.w	#50,-(a7)
	move.l	d5,-(a7)
	jsr	_plot_bitmap_32
	lea	14(a7),a7
L34:
	;line	149
	cmp.b	#28,d7
	bne	L35
	move.w	d6,d0
	ext.l	d0
	divs	#2,d0
	swap	d0
	tst.w	d0
	bne	L35
	;line	150
	move.w	#1,-4(a6)
	;line	151
	jsr	_play_klingon
L35:
	;line	153
	cmp.b	#28,d7
	bne	L36
	move.w	d6,d0
	ext.l	d0
	divs	#2,d0
	swap	d0
	cmp.w	#1,d0
	bne	L36
	;line	156
	pea	0
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	move.l	d0,d3
	;line	157
	move.l	(a4),a0
	and.b	#191,(a0)
	;line	158
	move.l	d3,-(a7)
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	;line	161
	move.l	a5,-(a7)
	move.w	#70,-(a7)
	jsr	_install_vector
	addq.l	#6,a7
	;line	164
	pea	0
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	move.l	d0,d3
	;line	165
	move.l	(a4),a0
	or.b	#64,(a0)
	;line	166
	move.l	d3,-(a7)
	move.w	d4,-(a7)
	jsr	(a3)
	;line	168
	moveq	#0,d0
	bra	L37
L36:
L30:
	tst.w	-4(a6)
	beq	L29
L31:
	;line	174
	pea	0
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	move.l	d0,d3
	;line	175
	move.l	(a4),a0
	and.b	#191,(a0)
	;line	176
	move.l	d3,-(a7)
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	;line	179
	move.l	a5,-(a7)
	move.w	#70,-(a7)
	jsr	_install_vector
	addq.l	#6,a7
	;line	182
	pea	0
	move.w	d4,-(a7)
	jsr	(a3)
	addq.l	#6,a7
	move.l	d0,d3
	;line	183
	move.l	(a4),a0
	or.b	#64,(a0)
	;line	184
	move.l	d3,-(a7)
	move.w	d4,-(a7)
	jsr	(a3)
	;line	186
	moveq	#0,d0
L37:
	movem.l	-50(a6),d3/d4/d5/d6/d7/a3/a4/a5
	unlk	a6
	rts
	globl	_install_vector
	bss
_buffer:
	ds.b	256
	globl	_buffer
_head:
	ds.b	1
	globl	_head
_tail:
	ds.b	1
	globl	_tail
	globl	_CTRL
	globl	_STATUS
	globl	_READER
	globl	_MFP
	globl	_IE
	globl	_do_kbd_isr
	globl	_get_input
	globl	_buffer_full
	globl	_plot_screen
	globl	_plot_bitmap_32
	globl	_clear_area
	globl	_splash_screen
	globl	_main
