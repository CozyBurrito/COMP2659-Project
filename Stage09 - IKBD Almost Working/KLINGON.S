; Generated by c68 v4.4.5, 25 Jan 95 (Jan 25 1995) from "klingon.c"
	data
	even
_gamePtr:
	dc.l	_game
_music_ticks:
	dc.w	0
_score_ticks:
	dc.w	0
_enemy_ticks:
	dc.w	0
_render_request:
	dc.w	1
_has_moved:
	dc.b	1
	even
_IKBD_RDR:
	dc.l	-1022
_ascii_tbl:
	dc.l	-97636
_IKBD_buffer:
	dc.b	0
	text
	even
_play_klingon:
	link	a6,#-12
	movem.l	d3/d4/d5/d6/a3/a4,-(a7)
	lea	_gamePtr,a3
	lea	_has_moved,a4
	;line	39
	moveq	#0,d6
	jsr	_get_video_base
	move.l	d0,d5
	move.l	#_buffer,d3
	;line	39
	move.l	#256,d0
	sub.l	d3,d0
	and.l	#255,d0
	add.l	d3,d0
	move.l	d0,d3
	;line	41
	move.l	(a3),-(a7)
	jsr	_init_model
	addq.l	#4,a7
	;line	43
	pea	0
	jsr	_time
	addq.l	#4,a7
	move.w	d0,-(a7)
	jsr	_srand
	addq.l	#2,a7
	;line	45
	jsr	_start_sound
	;line	47
	bra	L2
L1:
	;line	50
	jsr	_kbd_is_waiting
	tst.l	d0
	beq	L4
	;line	51
	jsr	_kbd_read_char
	move.b	d0,-3(a6)
	;line	52
	clr.w	d0
	move.b	-3(a6),d0
	move.w	d0,-(a7)
	clr.w	-(a7)
	move.l	(a3),-(a7)
	jsr	_request_player_move
	addq.l	#8,a7
L4:
	;line	55
	cmp.w	#70,_score_ticks
	blt	L5
	;line	56
	move.w	#1,-(a7)
	move.l	(a3),-(a7)
	jsr	_update_score
	addq.l	#6,a7
	;line	57
	clr.w	_score_ticks
L5:
	;line	60
	tst.b	(a4)
	beq	L6
	;line	61
	clr.w	-(a7)
	move.l	(a3),-(a7)
	jsr	_move_player_ship
	addq.l	#6,a7
	move.b	d0,(a4)
	;line	62
	tst.b	(a4)
	beq	L7
	;line	63
	jsr	_thruster
L7:
	;line	65
	clr.b	(a4)
L6:
	;line	68
	moveq	#0,d4
	bra	L9
L8:
	;line	69
	move.w	d4,-(a7)
	move.l	(a3),-(a7)
	jsr	_move_enemy_ship
	addq.l	#6,a7
	;line	70
	clr.w	-(a7)
	move.w	d4,-(a7)
	move.l	(a3),-(a7)
	jsr	_collision
	addq.l	#8,a7
L11:
	addq.w	#1,d4
L9:
	cmp.w	#6,d4
	bge	L12
	cmp.w	#3,_enemy_ticks
	bge	L8
L12:
L10:
	;line	72
	cmp.w	#3,_enemy_ticks
	blt	L13
	;line	73
	clr.w	_enemy_ticks
L13:
	;line	76
	cmp.w	#1,_render_request
	bne	L14
	;line	77
	tst.b	d6
	beq	L15
	;line	78
	clr.w	d0
	move.b	(a4),d0
	move.w	d0,-(a7)
	move.l	d5,-(a7)
	move.l	(a3),-(a7)
	jsr	_render_model
	lea	10(a7),a7
	;line	79
	move.l	d5,-(a7)
	jsr	_set_video_base
	addq.l	#4,a7
	bra	L16
L15:
	;line	82
	clr.w	d0
	move.b	(a4),d0
	move.w	d0,-(a7)
	move.l	d3,-(a7)
	move.l	(a3),-(a7)
	jsr	_render_model
	lea	10(a7),a7
	;line	83
	move.l	d3,-(a7)
	jsr	_set_video_base
	addq.l	#4,a7
L16:
	;line	86
	tst.b	d6
	seq	d0
	and.w	#1,d0
	move.b	d0,d6
	;line	87
	clr.w	_render_request
L14:
	;line	90
	jsr	_stop_thruster
L2:
	move.l	(a3),-(a7)
	jsr	_game_over
	addq.l	#4,a7
	tst.b	d0
	beq	L1
L3:
	;line	93
	jsr	_stop_sound
	;line	95
	clr.w	d0
	move.b	(a4),d0
	move.w	d0,-(a7)
	move.l	d5,-(a7)
	move.l	(a3),-(a7)
	jsr	_render_model
	lea	10(a7),a7
	;line	96
	move.l	d5,-(a7)
	jsr	_set_video_base
	movem.l	-36(a6),d3/d4/d5/d6/a3/a4
	unlk	a6
	rts
_install_vector:
	link	a6,#-12
	move.l	a3,-(a7)
	;line	105
	move.w	8(a6),d0
	ext.l	d0
	asl.l	#2,d0
	move.l	d0,a3
	pea	0
	move.w	#32,-(a7)
	jsr	__trap_1_wl
	addq.l	#6,a7
	move.l	d0,-12(a6)
	;line	105
	move.l	(a3),-4(a6)
	;line	106
	move.l	10(a6),(a3)
	;line	108
	move.l	-12(a6),-(a7)
	move.w	#32,-(a7)
	jsr	__trap_1_wl
	;line	109
	move.l	-4(a6),d0
L17:
	move.l	-16(a6),a3
	unlk	a6
	rts
_do_VBL_ISR:
	link	a6,#0
	;line	113
	addq.w	#1,_music_ticks
	;line	114
	move.w	_music_ticks,d0
	ext.l	d0
	move.l	d0,-(a7)
	jsr	_update_music
	addq.l	#4,a7
	tst.b	d0
	beq	L18
	;line	115
	clr.w	_music_ticks
L18:
	;line	118
	addq.w	#1,_score_ticks
	;line	120
	addq.w	#1,_enemy_ticks
	;line	122
	move.b	#1,_has_moved
	;line	124
	move.w	#1,_render_request
	unlk	a6
	rts
_do_IKBD_ISR:
	link	a6,#0
	;line	128
	move.l	_IKBD_RDR,a0
	move.b	(a0),_key
	;line	130
	move.b	_key,d0
	and.b	#128,d0
	bne	L19
	;line	131
	move.l	_ascii_tbl,a0
	clr.l	d0
	move.b	_key,d0
	add.l	d0,a0
	move.b	(a0),_IKBD_buffer
L19:
	unlk	a6
	rts
_kbd_is_waiting:
	link	a6,#0
	;line	137
	tst.b	_IKBD_buffer
	sne	d0
	and.w	#1,d0
	ext.l	d0
L20:
	unlk	a6
	rts
_kbd_read_char:
	link	a6,#0
L21:
L22:
	;line	141
	tst.b	_IKBD_buffer
	beq	L21
L23:
	;line	143
	move.b	_IKBD_buffer,_ret
	;line	144
	clr.b	_IKBD_buffer
	;line	146
	move.b	_ret,d0
L24:
	unlk	a6
	rts
_install_vectors:
	link	a6,#0
	;line	150
	pea	_vbl_isr
	move.w	#28,-(a7)
	jsr	_install_vector
	addq.l	#6,a7
	move.l	d0,_orig_vector_vbl
	;line	151
	pea	_ikbd_isr
	move.w	#70,-(a7)
	jsr	_install_vector
	move.l	d0,_orig_vector_ikbd
	unlk	a6
	rts
_remove_vectors:
	link	a6,#0
	;line	155
	move.l	_orig_vector_vbl,-(a7)
	move.w	#28,-(a7)
	jsr	_install_vector
	addq.l	#6,a7
	;line	156
	move.l	_orig_vector_ikbd,-(a7)
	move.w	#70,-(a7)
	jsr	_install_vector
	unlk	a6
	rts
	globl	_install_vector
	globl	_do_VBL_ISR
	globl	_do_IKBD_ISR
	globl	_play_klingon
	globl	_install_vectors
	globl	_remove_vectors
	globl	_kbd_is_waiting
	globl	_kbd_read_char
	bss
_buffer:
	ds.b	35256
	globl	_buffer
	even
_game:
	ds.b	62
	globl	_game
	globl	_gamePtr
	globl	_music_ticks
	globl	_score_ticks
	globl	_enemy_ticks
	globl	_render_request
	globl	_has_moved
_orig_vector_vbl:
	ds.b	4
	globl	_orig_vector_vbl
_orig_vector_ikbd:
	ds.b	4
	globl	_orig_vector_ikbd
	globl	_IKBD_RDR
	globl	_ascii_tbl
	globl	_IKBD_buffer
_ret:
	ds.b	1
	globl	_ret
_key:
	ds.b	1
	globl	_key
